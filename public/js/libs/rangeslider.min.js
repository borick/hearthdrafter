/*! rangeslider.js - v1.0.0 | (c) 2015 @andreruffert | MIT license | https://github.com/andreruffert/rangeslider.js */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof exports==="object"){a(require("jquery"))}else{a(jQuery)}}}(function(f){function a(){var m=document.createElement("input");m.setAttribute("type","range");return m.type!=="text"}var h="rangeslider",j=0,c=a(),e={polyfill:true,rangeClass:"rangeslider",disabledClass:"rangeslider--disabled",fillClass:"rangeslider__fill",handleClass:"rangeslider__handle",startEvent:["mousedown","touchstart","pointerdown"],moveEvent:["mousemove","touchmove","pointermove"],endEvent:["mouseup","touchend","pointerup"]};function g(n,o){var m=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return n.apply(null,m)},o)}function k(n,m){m=m||100;return function(){if(!n.debouncing){var o=Array.prototype.slice.apply(arguments);n.lastReturnVal=n.apply(window,o);n.debouncing=true}clearTimeout(n.debounceTimeout);n.debounceTimeout=setTimeout(function(){n.debouncing=false},m);return n.lastReturnVal}}function b(m){if(m.offsetWidth===0||m.offsetHeight===0||m.open===false){return true}return false}function d(n){var m=[],o=n.parentNode;while(b(o)){m.push(o);o=o.parentNode}return m}function l(o,r){var t=d(o),q=t.length,s=[],n=o[r];function u(v){if(typeof v.open!=="undefined"){v.open=(v.open)?false:true}}if(q){for(var p=0;p<q;p++){s[p]=t[p].style.display;t[p].style.display="block";t[p].style.height="0";t[p].style.overflow="hidden";t[p].style.visibility="hidden";u(t[p])}n=o[r];for(var m=0;m<q;m++){u(t[m]);t[m].style.display=s[m];t[m].style.height="";t[m].style.overflow="";t[m].style.visibility=""}}return n}function i(n,m){this.$window=f(window);this.$document=f(document);this.$element=f(n);this.options=f.extend({},e,m);this.polyfill=this.options.polyfill;this.onInit=this.options.onInit;this.onSlide=this.options.onSlide;this.onSlideEnd=this.options.onSlideEnd;if(this.polyfill){if(c){return false}}this.identifier="js-"+h+"-"+(j++);this.startEvent=this.options.startEvent.join("."+this.identifier+" ")+"."+this.identifier;this.moveEvent=this.options.moveEvent.join("."+this.identifier+" ")+"."+this.identifier;this.endEvent=this.options.endEvent.join("."+this.identifier+" ")+"."+this.identifier;this.min=parseFloat(this.$element[0].getAttribute("min")||0);this.max=parseFloat(this.$element[0].getAttribute("max")||100);this.value=parseFloat(this.$element[0].value||this.min+(this.max-this.min)/2);this.step=parseFloat(this.$element[0].getAttribute("step")||1);this.toFixed=(this.step+"").replace(".","").length-1;this.$fill=f('<div class="'+this.options.fillClass+'" />');this.$handle=f('<div class="'+this.options.handleClass+'" />');this.$range=f('<div class="'+this.options.rangeClass+'" id="'+this.identifier+'" />').insertAfter(this.$element).prepend(this.$fill,this.$handle);this.$element.css({position:"absolute",width:"1px",height:"1px",overflow:"hidden",opacity:"0"});this.handleDown=f.proxy(this.handleDown,this);this.handleMove=f.proxy(this.handleMove,this);this.handleEnd=f.proxy(this.handleEnd,this);this.init();var o=this;this.$window.on("resize."+this.identifier,k(function(){g(function(){o.update()},300)},20));this.$document.on(this.startEvent,"#"+this.identifier+":not(."+this.options.disabledClass+")",this.handleDown);this.$element.on("change."+this.identifier,function(r,q){if(q&&q.origin===o.identifier){return}var p=r.target.value,s=o.getPositionFromValue(p);o.setPosition(s)})}i.prototype.init=function(){if(this.onInit&&typeof this.onInit==="function"){this.onInit()}this.update()};i.prototype.update=function(){this.handleWidth=l(this.$handle[0],"offsetWidth");this.rangeWidth=l(this.$range[0],"offsetWidth");this.maxHandleX=this.rangeWidth-this.handleWidth;this.grabX=this.handleWidth/2;this.position=this.getPositionFromValue(this.value);if(this.$element[0].disabled){this.$range.addClass(this.options.disabledClass)}else{this.$range.removeClass(this.options.disabledClass)}this.setPosition(this.position)};i.prototype.handleDown=function(n){n.preventDefault();this.$document.on(this.moveEvent,this.handleMove);this.$document.on(this.endEvent,this.handleEnd);if((" "+n.target.className+" ").replace(/[\n\t]/g," ").indexOf(this.options.handleClass)>-1){return}var p=this.getRelativePosition(n),m=this.$range[0].getBoundingClientRect().left,o=this.getPositionFromNode(this.$handle[0])-m;this.setPosition(p-this.grabX);if(p>=o&&p<o+this.handleWidth){this.grabX=p-o}};i.prototype.handleMove=function(m){m.preventDefault();var n=this.getRelativePosition(m);this.setPosition(n-this.grabX)};i.prototype.handleEnd=function(m){m.preventDefault();this.$document.off(this.moveEvent,this.handleMove);this.$document.off(this.endEvent,this.handleEnd);this.$element.trigger("change",{origin:this.identifier});if(this.onSlideEnd&&typeof this.onSlideEnd==="function"){this.onSlideEnd(this.position,this.value)}};i.prototype.cap=function(o,n,m){if(o<n){return n}if(o>m){return m}return o};i.prototype.setPosition=function(o){var m,n;m=this.getValueFromPosition(this.cap(o,0,this.maxHandleX));n=this.getPositionFromValue(m);this.$fill[0].style.width=(n+this.grabX)+"px";this.$handle[0].style.left=n+"px";this.setValue(m);this.position=n;this.value=m;if(this.onSlide&&typeof this.onSlide==="function"){this.onSlide(n,m)}};i.prototype.getPositionFromNode=function(n){var m=0;while(n!==null){m+=n.offsetLeft;n=n.offsetParent}return m};i.prototype.getRelativePosition=function(o){var n=this.$range[0].getBoundingClientRect().left,m=0;if(typeof o.pageX!=="undefined"){m=o.pageX}else{if(typeof o.originalEvent.clientX!=="undefined"){m=o.originalEvent.clientX}else{if(o.originalEvent.touches&&o.originalEvent.touches[0]&&typeof o.originalEvent.touches[0].clientX!=="undefined"){m=o.originalEvent.touches[0].clientX}else{if(o.currentPoint&&typeof o.currentPoint.x!=="undefined"){m=o.currentPoint.x}}}}return m-n};i.prototype.getPositionFromValue=function(n){var m,o;m=(n-this.min)/(this.max-this.min);o=m*this.maxHandleX;return o};i.prototype.getValueFromPosition=function(o){var m,n;m=((o)/(this.maxHandleX||1));n=this.step*Math.round(m*(this.max-this.min)/this.step)+this.min;return Number((n).toFixed(this.toFixed))};i.prototype.setValue=function(m){if(m===this.value){return}this.$element.val(m).trigger("input",{origin:this.identifier})};i.prototype.destroy=function(){this.$document.off("."+this.identifier);this.$window.off("."+this.identifier);this.$element.off("."+this.identifier).removeAttr("style").removeData("plugin_"+h);if(this.$range&&this.$range.length){this.$range[0].parentNode.removeChild(this.$range[0])}};f.fn[h]=function(m){return this.each(function(){var o=f(this),n=o.data("plugin_"+h);if(!n){o.data("plugin_"+h,(n=new i(this,m)))}if(typeof m==="string"){n[m]()}})}}));